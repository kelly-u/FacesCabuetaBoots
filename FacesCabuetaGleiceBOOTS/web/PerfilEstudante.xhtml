<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:b="http://bootsfaces.net/ui">
    <h:head>
        <title>Perfil Estudante</title>
    </h:head>
    <h:body style="background-color: wheat;">
        <ui:include src="menuEstudante.xhtml"/>


        <h2 style="margin: 3%; font-family: Arial;">Bem-vindo(a): #{estudanteController.logado.nome}</h2>
        <div style="align-content: center; position: relative; left: 25%">
            <table class="table" style="width: 50%; position:relative">

                <tr>
                    <td style="width: 20%">
                        <b:link value="Editar Perfil" onclick="$('.modalEditPerfil').modal('show')" href="#"/><br/>
                        <b:link value="Editar Senha" onclick="$('.modalEditSenha').modal('show')" href="#"/>
                    </td>
                    <td>
                        <b:panelGrid colSpans="4,8" size="xs">

                            <h:outputText value="Nome"/>
                            <h:outputText value="#{estudanteController.logado.nome}"/>

                            <h:outputText value="Email"/>
                            <h:outputText value="#{estudanteController.logado.email}"/>

                            <h:outputText  value="Ano de entrada"/>
                            <h:outputText value="#{estudanteController.logado.anoEntrada}"/>

                        </b:panelGrid>
                    </td>
                </tr>

            </table>
        </div>

        <b:form id="formEditPerfil">
            <b:modal style-class="modalEditPerfil fade" title="Editar perfil">

                <b:panelGrid colSpans="4,8" size="xs">

                    <h:outputText value="Nome"/>
                    <b:inputText value="#{estudanteController.logado.nome}"/>

                    <h:outputText value="Email"/>
                    <b:inputText value="#{estudanteController.logado.email}"/>

                    <h:outputText value="Ano de Entrada"/>
                    <b:inputText value="#{estudanteController.logado.anoEntrada}"/>

                </b:panelGrid>

                <b:commandButton look="success" value="Editar" action="#{estudanteController.editarPerfil()}"
                                 ajax="false"/>

            </b:modal>

            <b:modal style-class="modalEditSenha fade" title="Alterar senha:">
                <b:panelGrid colSpans="4,8" size="xs">
                    <h:outputText value="Senha Atual:"/>
                    <b:inputSecret value="#{atual}"/>

                    <h:outputText  value="Nova Senha:"/>
                    <b:inputSecret value="#{nova}"/>

                    <h:outputText  value="Confime nova senha:"/>
                    <b:inputSecret value="#{confirm}"/>

                </b:panelGrid>

                <b:commandButton value="Editar" look="success" 
                                 action="#{estudanteController.editarSenha(atual, nova, confirm)}"
                                 ajax="false"/>
            </b:modal>
        </b:form>

    </h:body>
</html>

